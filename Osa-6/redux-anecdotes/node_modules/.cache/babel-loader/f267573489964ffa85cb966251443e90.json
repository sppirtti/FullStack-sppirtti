{"ast":null,"code":"import anecdoteService from '../services/anecdotes';\n\nconst reducer = (state = [], action) => {\n  console.log('state now: ', state);\n  console.log('action', action);\n\n  switch (action.type) {\n    case 'NEW_ANECDOTE':\n      return state.concat(action.data);\n\n    case 'INIT_ANECDOTES':\n      return action.data;\n\n    case 'VOTE':\n      const id = action.data.id;\n      const anecdoteToLike = state.find(n => n.id === id);\n      const votedAnecdote = { ...anecdoteToLike,\n        votes: anecdoteToLike.votes + 1\n      };\n      return state.map(anecdote => anecdote.id !== id ? anecdote : votedAnecdote);\n\n    default:\n      return state;\n  }\n};\n\nexport const createAnecdote = content => {\n  return async dispatch => {\n    const newAnecdote = await anecdoteService.createNew(content);\n    dispatch({\n      type: 'NEW_ANECDOTE',\n      data: newAnecdote\n    });\n  };\n};\nexport const initializeAnecdotes = () => {\n  return async dispatch => {\n    const anecdotes = await anecdoteService.getAll();\n    dispatch({\n      type: 'INIT_ANECDOTES',\n      data: anecdotes\n    });\n  };\n};\nexport const voteAnecdote = (id, content, votes) => {\n  return async dispatch => {\n    await anecdoteService.update(id, content, votes + 1);\n    dispatch({\n      type: 'VOTE',\n      data: {\n        id\n      }\n    });\n  };\n};\nexport default reducer;","map":{"version":3,"sources":["C:/Users/Samuli/FullStack/Osa-6/redux-anecdotes/src/reducers/anecdoteReducer.js"],"names":["anecdoteService","reducer","state","action","console","log","type","concat","data","id","anecdoteToLike","find","n","votedAnecdote","votes","map","anecdote","createAnecdote","content","dispatch","newAnecdote","createNew","initializeAnecdotes","anecdotes","getAll","voteAnecdote","update"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,uBAA5B;;AAEA,MAAMC,OAAO,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AACtCC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,KAA3B;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,MAAtB;;AAEA,UAAQA,MAAM,CAACG,IAAf;AAEE,SAAK,cAAL;AACE,aAAQJ,KAAK,CAACK,MAAN,CAAaJ,MAAM,CAACK,IAApB,CAAR;;AAEF,SAAK,gBAAL;AACE,aAAOL,MAAM,CAACK,IAAd;;AAEF,SAAK,MAAL;AACE,YAAMC,EAAE,GAAGN,MAAM,CAACK,IAAP,CAAYC,EAAvB;AACA,YAAMC,cAAc,GAAGR,KAAK,CAACS,IAAN,CAAWC,CAAC,IAAIA,CAAC,CAACH,EAAF,KAASA,EAAzB,CAAvB;AACA,YAAMI,aAAa,GAAG,EACpB,GAAGH,cADiB;AACDI,QAAAA,KAAK,EAAEJ,cAAc,CAACI,KAAf,GAAuB;AAD7B,OAAtB;AAGA,aAAOZ,KAAK,CAACa,GAAN,CAAUC,QAAQ,IAAIA,QAAQ,CAACP,EAAT,KAAgBA,EAAhB,GAAqBO,QAArB,GAAgCH,aAAtD,CAAP;;AAEF;AACE,aAAOX,KAAP;AAjBJ;AAoBD,CAxBD;;AA0BA,OAAO,MAAMe,cAAc,GAAIC,OAAD,IAAa;AACzC,SAAO,MAAMC,QAAN,IAAkB;AACvB,UAAMC,WAAW,GAAG,MAAMpB,eAAe,CAACqB,SAAhB,CAA0BH,OAA1B,CAA1B;AACAC,IAAAA,QAAQ,CAAC;AACPb,MAAAA,IAAI,EAAE,cADC;AAEPE,MAAAA,IAAI,EAAEY;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CARM;AAUP,OAAO,MAAME,mBAAmB,GAAG,MAAM;AACvC,SAAO,MAAMH,QAAN,IAAkB;AACvB,UAAMI,SAAS,GAAG,MAAMvB,eAAe,CAACwB,MAAhB,EAAxB;AACAL,IAAAA,QAAQ,CAAC;AACPb,MAAAA,IAAI,EAAE,gBADC;AAEPE,MAAAA,IAAI,EAAEe;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CARM;AAUL,OAAO,MAAME,YAAY,GAAG,CAAChB,EAAD,EAAKS,OAAL,EAAcJ,KAAd,KAAwB;AAClD,SAAO,MAAMK,QAAN,IAAkB;AACvB,UAAMnB,eAAe,CAAC0B,MAAhB,CAAuBjB,EAAvB,EAA2BS,OAA3B,EAAoCJ,KAAK,GAAG,CAA5C,CAAN;AACAK,IAAAA,QAAQ,CAAC;AACPb,MAAAA,IAAI,EAAE,MADC;AAEPE,MAAAA,IAAI,EAAE;AAAEC,QAAAA;AAAF;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CARM;AAWT,eAAeR,OAAf","sourcesContent":["import anecdoteService from '../services/anecdotes'\r\n\r\nconst reducer = (state = [], action) => {\r\n  console.log('state now: ', state)\r\n  console.log('action', action)\r\n\r\n  switch (action.type) {\r\n\r\n    case 'NEW_ANECDOTE':\r\n      return (state.concat(action.data))\r\n\r\n    case 'INIT_ANECDOTES':\r\n      return action.data\r\n\r\n    case 'VOTE':\r\n      const id = action.data.id\r\n      const anecdoteToLike = state.find(n => n.id === id)\r\n      const votedAnecdote = {\r\n        ...anecdoteToLike, votes: anecdoteToLike.votes + 1\r\n      }\r\n      return state.map(anecdote => anecdote.id !== id ? anecdote : votedAnecdote)\r\n\r\n    default:\r\n      return state\r\n  }\r\n\r\n}\r\n\r\nexport const createAnecdote = (content) => {\r\n  return async dispatch => {\r\n    const newAnecdote = await anecdoteService.createNew(content)\r\n    dispatch({\r\n      type: 'NEW_ANECDOTE',\r\n      data: newAnecdote,\r\n    })\r\n  }\r\n}\r\n\r\nexport const initializeAnecdotes = () => {\r\n  return async dispatch => {\r\n    const anecdotes = await anecdoteService.getAll()\r\n    dispatch({\r\n      type: 'INIT_ANECDOTES',\r\n      data: anecdotes,\r\n    })\r\n  }\r\n}\r\n\r\n  export const voteAnecdote = (id, content, votes) => {\r\n    return async dispatch => {\r\n      await anecdoteService.update(id, content, votes + 1)\r\n      dispatch({\r\n        type: 'VOTE',\r\n        data: { id },\r\n      })\r\n    }\r\n  }\r\n\r\n\r\nexport default reducer"]},"metadata":{},"sourceType":"module"}